runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
dirname(rstudioapi::getSourceEditorContext()$path)
runApp()
runApp()
runApp()
runApp()
runApp()
current_dir_data = '/Users/fionnachalmers/Documents/github/BHF_DSC_HDS/BHF_Dashboards/BHF_DSC_TRE_External_Dashboard'
#dirname(rstudioapi::getSourceEditorContext()$path)
# TRE Dataset Provisioning Dashboard
t.dataset_dashboard = read.csv(paste0(current_dir_data,'/Data/TRE_dataset_provisioning_dashboard.csv'))
datasets_available = t.dataset_dashboard %>%
mutate(across(everything(), .fn=~str_trim(.,side="both")))
# Test Dataset using GDPPR Date and HES AE
t.monthly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_gdppr_date.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m)
t.weekly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/weekly_grouped_gdppr_date.csv')) %>% mutate(freq="Weekly") %>% rename(date=date_w)
t.monthly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_hes_ae.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m)
t.weekly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/weekly_grouped_hes_ae.csv')) %>% mutate(freq="Weekly") %>% rename(date=date_w)
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae)
t.monthly_grouped_hes_ae
t.monthly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_hes_ae.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m) %>%
rename(gdppr_date=hes_ae)
mutate(table_name == ifelse(table_name=="gdppr_date","hes_ae",table_name)
t.monthly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_hes_ae.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m) %>%
t.monthly_grouped_hes_ae
runApp()
t.monthly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_hes_ae.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m) %>%
mutate(table_name == ifelse(table_name=="hes_ae","gdppr_date",table_name))
t.monthly_grouped_hes_ae
t.monthly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_hes_ae.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m) %>%
mutate(table_name = ifelse(table_name=="hes_ae","gdppr_date",table_name))
t.monthly_grouped_hes_ae
runApp()
test_dataset_static
runApp()
runApp()
runApp()
runApp()
t.weekly_grouped_hes_ae
View(test_dataset_static)
runApp()
runApp()
test_dataset_static
test_dataset_static %>%
filter(Nation=="England") %>%
filter(table_name=="gdppr_date")
test_dataset_static %>%
filter(Nation=="Scotland") %>%
filter(table_name=="gdppr_date")
test_dataset_static %>%
filter(Nation=="Scotland") %>%
filter(table_name=="hes_ae")
test_dataset_static %>%
filter(Nation=="England") %>%
filter(table_name=="hes_ae")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library(tidyverse)
current_dir_data = '/Users/fionnachalmers/Documents/github/BHF_DSC_HDS/BHF_Dashboards/BHF_DSC_TRE_External_Dashboard'
#dirname(rstudioapi::getSourceEditorContext()$path)
# TRE Dataset Provisioning Dashboard
t.dataset_dashboard = read.csv(paste0(current_dir_data,'/Data/TRE_dataset_provisioning_dashboard.csv'))
datasets_available = t.dataset_dashboard %>%
mutate(across(everything(), .fn=~str_trim(.,side="both")))
# Test Dataset using GDPPR Date and HES AE
t.monthly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_gdppr_date.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m) %>% mutate(Nation="England") %>% mutate(table_name = ifelse(table_name=="gdppr_date","hes_ae",table_name))
t.weekly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/weekly_grouped_gdppr_date.csv')) %>% mutate(freq="Weekly") %>% rename(date=date_w) %>% mutate(Nation="Scotland") %>% mutate(table_name = ifelse(table_name=="gdppr_date","hes_ae",table_name))
t.monthly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_hes_ae.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m) %>%
mutate(table_name = ifelse(table_name=="gdppr_date","hes_ae",table_name)) %>% mutate(Nation="Scotland")
t.weekly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/weekly_grouped_hes_ae.csv')) %>% mutate(freq="Weekly") %>% rename(date=date_w) %>% mutate(Nation="England") %>% mutate(table_name = ifelse(table_name=="gdppr_date","hes_ae",table_name))
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae)
test_dataset_static %>%
filter(Nation=="England") %>%
filter(table_name=="gdppr_date")
test_dataset_static %>%
filter(Nation=="England")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
# Test Dataset using GDPPR Date and HES AE
t.monthly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_gdppr_date.csv')) %>% mutate(freq="Monthly") %>% rename(date=date_m)
View(test_dataset_static)
as.Date(paste(2014, 1, 1, sep="-"), "%Y-%U-%u")
as.Date(paste(2022, 1, 1, sep="-"), "%Y-%U-%u")
as.Date(paste(2022, 17, 1, sep="-"), "%Y-%U-%u")
#date of week start of week + year format
as.Date(paste(2022, 17, 1, sep="-"), "%Y-%U-%u")
paste(2022, 17, 1, sep="-")
paste(2022, 12, 1, sep="-")
as.Date(paste(2022, 12, 1, sep="-"), "%Y-%m-%d")
#date of week start of week + year format
as.Date(paste(2022, 17, 1, sep="-"), "%Y-%U-%u")
as.Date(paste(2022, 12, 1, sep="-"), "%Y-%m-%d")
as.Date(paste(2022, 9, 1, sep="-"), "%Y-%m-%d")
View(test_dataset_static)
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = ifelse(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
NA))
t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae)
t.weekly_grouped_hes_ae
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = ifelse(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
NA))
library(tidyverse)
current_dir_data = '/Users/fionnachalmers/Documents/github/BHF_DSC_HDS/BHF_Dashboards/BHF_DSC_TRE_External_Dashboard'
#dirname(rstudioapi::getSourceEditorContext()$path)
# TRE Dataset Provisioning Dashboard
t.dataset_dashboard = read.csv(paste0(current_dir_data,'/Data/TRE_dataset_provisioning_dashboard.csv'))
datasets_available = t.dataset_dashboard %>%
mutate(across(everything(), .fn=~str_trim(.,side="both")))
# Test Dataset using GDPPR Date and HES AE
t.monthly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_gdppr_date.csv')) %>%
mutate(freq="Monthly") %>% rename(date=date_m)
t.weekly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/weekly_grouped_gdppr_date.csv')) %>%
mutate(freq="Weekly") %>% rename(date=date_w)
t.monthly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_hes_ae.csv')) %>%
mutate(freq="Monthly") %>% rename(date=date_m)
t.weekly_grouped_hes_ae = read.csv(paste0(current_dir_data,'/Data/weekly_grouped_hes_ae.csv')) %>%
mutate(freq="Weekly") %>% rename(date=date_w)
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = ifelse(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
NA))
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = ifelse(freq=="Monthly",1,
freq=="Weekly",2,
NA))
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = ifelse(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
ifelse(freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
NA)))
runApp()
test_dataset_static
test_dataset_static %>%
filter(freq=="Monthly")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id")
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = ifelse(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
ifelse(freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
as.Date(NA))))
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = ifelse(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
ifelse(freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
as.Date(NA))))
test_dataset_static
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrnage(date_format)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
runApp()
as.Date(paste(2021, 12, 1, sep="-"), "%Y-%U-%u")
as.Date(paste(2021, 12, 1, sep="-"), "%Y-%m-%d")
as.Date(paste(2022, 1, 1, sep="-"), "%Y-%m-%d")
as.Date(paste(2021, 12, 1, sep="-"), "%Y-%m-%d")
as.Date(paste(2022, 1, 1, sep="-"), "%Y-%m-%d")
as.Date(paste(2021, 12, 1, sep="-"), "%Y-%m-%d") %>% as.numeric()
as.Date(paste(2021, 12, 1, sep="-"), "%Y-%m-%d") %>% as.numeric()
as.Date(paste(2022, 1, 1, sep="-"), "%Y-%m-%d") %>% as.numeric()
as.Date(18962)
as.Date(18962, %Y-%m-%d")
as.Date(18962, "%Y-%m-%d")
as.Date(18962, "%Y-%m-%d")
as.Date(as.character(18962), "%Y-%m-%d")
as.Date(18962, "%Y-%m-%d")
lubridate::ymd(18962)
as.Date(18962, "%Y-%m-%d")
as.Date(paste(2021, 12, 1, sep="-"), "%Y-%m-%d") %>% as.numeric()
as.Date(paste(2021, 12, 1, sep="-"), "%Y-%m-%d")
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = if_else(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
if_else(freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
as.Date(NA))))
test_dataset_static
runApp()
runApp()
runApp()
runApp()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = if_else(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
if_else(freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
as.Date(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(date_y)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(distinct(date_y))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select((date_y,distinct))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(date_y)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(date_y) %>%
distinct()
test_dataset_static = t.monthly_grouped_gdppr_date %>%
bind_rows(t.weekly_grouped_gdppr_date) %>%
bind_rows(t.monthly_grouped_hes_ae) %>%
bind_rows(t.weekly_grouped_hes_ae) %>%
mutate(date_format = if_else(freq=="Monthly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%m-%d"),
if_else(freq=="Weekly",as.Date(paste(date_y, date, 1, sep="-"), "%Y-%U-%u"),
as.Date(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(date_y) %>%
distinct()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(date_y) %>%
distinct()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(date_y) %>%
distinct() %>%
pull(min)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
select(date_y) %>%
distinct() %>%
summarise(min = min(date_y),
max = max(date_y))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year)
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year) %>% class()
runApp()
runApp()
runApp()
runApp()
