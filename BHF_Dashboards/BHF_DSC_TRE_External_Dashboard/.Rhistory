<<<<<<< HEAD
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year)
=======
<<<<<<< HEAD
shiny::runApp()
install.packages("hover")
runApp()
install.packages('ggiraph')
runApp()
install.packages('patchwork')
install.packages('fontawesome')
runApp()
devtools::install_github("gadenbuie/shinyThings")
install.packages('devtools')
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
devtools::install_github("gadenbuie/shinyThings")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
install.packages("devtools")
shiny::runApp()
runApp()
current_dir_data = 'C:/RProjects/BHF_TRE_Dashboard_External'
list.files(current_dir_data)
current_dir_data = 'C:/RProjects/BHF_DSC_HDS/BHF_TRE_Dashboard_External'
list.files(current_dir_data)
library(readxl)
dataset <- read_excel(NULL)
View(dataset)
list.files("C:/RProjects/BHF_DSC_HDS/BHF_Dashboards/BHF_DSC_TRE_External_Dashboard")
current_dir_data = 'C:/RProjects/BHF_DSC_HDS/BHF_Dashboards/BHF_DSC_TRE_External_Dashboard'
list.files(current_dir_data)
runApp()
source('bhf_dsc_hds_designkit.R')
source('bhf_dsc_hds_designkit.R')
runApp('Dev/app_module_example.R')
runApp('C:/RProjects/BHF_DSC_HDS/BHF_Dashboards/BHF_DSC_TRE_External_Dashboard/Lars_module')
library(readxl)
TRE_DD_391419_j3w9t <- read_excel("Lars_module/TRE_DD_391419_j3w9t.xlsx",
sheet = "gdppr", skip = 2)
View(TRE_DD_391419_j3w9t)
getwd()
data_dictionary = read_excel("Lars_module/TRE_DD_391419_j3w9t.xlsx", sheet = "gdppr", skip = 2)
=======
>>>>>>> a5ac91a5005b021589dc14ef93317081d1b43c71
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year) %>% class()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(test_dataset_static)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
month.name(1)
month.name[1]
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",month.name(date),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",lubridate::month(date, label = TRUE, abbr = FALSE)),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",lubridate::month(date, label = TRUE, abbr = FALSE),NA))
lubridate::month(1, label = TRUE, abbr = FALSE)
lubridate::month(1, label = TRUE, abbr = FALSE)[1]
as.character(lubridate::month(1, label = TRUE, abbr = FALSE))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",as.character(lubridate::month(date, label = TRUE, abbr = FALSE)),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",glue(as.character(lubridate::month(date, label = TRUE, abbr = FALSE)),":"),
ifelse(freq=="Weekly",glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",glue::glue(as.character(lubridate::month(date, label = TRUE, abbr = FALSE)),":"),
ifelse(freq=="Weekly",glue::glue("Week ",date),
NA)))
glue::glue(as.character(lubridate::month(1,
label = TRUE, abbr = FALSE)),":")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",glue::glue(as.character(lubridate::month(date,
label = TRUE, abbr = FALSE)),":"),
ifelse(freq=="Weekly",glue::glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",glue::glue(as.character(lubridate::month(date,
label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",glue::glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
glue::glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
"test",
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
"test",
if_else(freq=="Weekly",
"test",
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
glue::glue("Week ",date),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly","test1", if_else(freq=="Weekly","test2",NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly","test1", if_else(freq=="Weekly","test2",as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
"test1",
if_else(freq=="Weekly",
"test2",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
"test2",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
"test2",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
paste0("Week ",date),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
# Test Dataset using GDPPR Date and HES AE
t.monthly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_gdppr_date.csv')) %>%
mutate(freq="Monthly") %>% rename(date=date_m)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
View(test_dataset_static)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
View(test_dataset_static)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
ifelse(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
"T",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": ")))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": ")),NA)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
#filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
as.character(NA)))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
as.character(NA)))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
month.name[date],
as.character(NA)))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
month.name[date],
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA))))
runApp()
test_dataset_static %>%
mutate(N_tooltip = format(.data$N, nsmall=1, big.mark=",")) %>%
mutate(N_tooltip_date = paste0(date_name,N_tooltip))
runApp()
shiny::runApp()
shiny::runApp()
runApp()
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA)))) %>%
filter(max(date_format))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA)))) %>%
filter(date_format == max(date_format))
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
>>>>>>> 7bc0e517ca55f3d4503990dec611e6cb4423427c
