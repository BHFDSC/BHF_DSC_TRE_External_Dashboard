filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year)
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
summarise(min = min(date_y),
max = max(date_y)) %>%
pivot_longer(cols=c(min,max),names_to="extremum",values_to="year") %>% filter(extremum=="min") %>% pull(year) %>% class()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(test_dataset_static)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
month.name(1)
month.name[1]
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",month.name(date),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",lubridate::month(date, label = TRUE, abbr = FALSE)),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",lubridate::month(date, label = TRUE, abbr = FALSE),NA))
lubridate::month(1, label = TRUE, abbr = FALSE)
lubridate::month(1, label = TRUE, abbr = FALSE)[1]
as.character(lubridate::month(1, label = TRUE, abbr = FALSE))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",as.character(lubridate::month(date, label = TRUE, abbr = FALSE)),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",glue(as.character(lubridate::month(date, label = TRUE, abbr = FALSE)),":"),
ifelse(freq=="Weekly",glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",glue::glue(as.character(lubridate::month(date, label = TRUE, abbr = FALSE)),":"),
ifelse(freq=="Weekly",glue::glue("Week ",date),
NA)))
glue::glue(as.character(lubridate::month(1,
label = TRUE, abbr = FALSE)),":")
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",glue::glue(as.character(lubridate::month(date,
label = TRUE, abbr = FALSE)),":"),
ifelse(freq=="Weekly",glue::glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",glue::glue(as.character(lubridate::month(date,
label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",glue::glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
glue::glue("Week ",date),
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
"test",
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
"test",
if_else(freq=="Weekly",
"test",
NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
glue::glue("Week ",date),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly","test1", if_else(freq=="Weekly","test2",NA)))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly","test1", if_else(freq=="Weekly","test2",as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
"test1",
if_else(freq=="Weekly",
"test2",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
glue::glue(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
"test2",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
"test2",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),":"),
if_else(freq=="Weekly",
paste0("Week ",date),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
# Test Dataset using GDPPR Date and HES AE
t.monthly_grouped_gdppr_date = read.csv(paste0(current_dir_data,'/Data/monthly_grouped_gdppr_date.csv')) %>%
mutate(freq="Monthly") %>% rename(date=date_m)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
View(test_dataset_static)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
View(test_dataset_static)
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
ifelse(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
if_else(freq=="Weekly",
paste0("Week ",date,": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
"T",
as.character(NA))))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": ")))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": ")),NA)
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
#filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Weekly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = ifelse(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),NA))
test_dataset_static %>%
filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
as.character(NA)))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
paste0(as.character(lubridate::month(date,label = TRUE, abbr = FALSE)),": "),
as.character(NA)))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(month_name = if_else(freq=="Monthly",
month.name[date],
as.character(NA)))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
month.name[date],
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA))))
runApp()
test_dataset_static %>%
mutate(N_tooltip = format(.data$N, nsmall=1, big.mark=",")) %>%
mutate(N_tooltip_date = paste0(date_name,N_tooltip))
runApp()
shiny::runApp()
shiny::runApp()
runApp()
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA)))) %>%
filter(max(date_format))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA))))
test_dataset_static %>%
#filter(freq=="Monthly") %>%
filter(table_name=="gdppr_date") %>%
filter(Type == "N_distinct_id") %>%
arrange(date_format) %>%
mutate(date_name = if_else(freq=="Weekly",
paste0("Week ",date,": "),
if_else(freq=="Monthly",
paste0(month.name[date],": "),
as.character(NA)))) %>%
filter(date_format == max(date_format))
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
